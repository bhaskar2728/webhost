<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Login Page</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column; font-family: sans-serif;">

    <h2>My Web App</h2>
    
    <div id="g_id_onload"
         data-client_id="255314012148-79edlhfc72vo1evippr0cgf7bki564ti.apps.googleusercontent.com"
         data-callback="handleCredentialResponse"
         data-auto_prompt="false">
    </div>
    <div class="g_id_signin" data-type="standard"></div>

    <button onclick="simulateLogin()" style="margin-top: 50px; padding: 10px 20px; background: #333; color: white;">
        Simulate Login (For Testing)
    </button>

    <script>
        function handleCredentialResponse(response) {
            // 1. Get the token from Google
            const token = response.credential;
            finalizeLogin(token);
        }

        function simulateLogin() {
            // Create a fake token for testing logic
            const fakeToken = "mock_token_" + new Date().getTime();
            finalizeLogin(fakeToken);
        }

        function finalizeLogin(token) {
            console.log("Login Success. Token:", token);

            // 2. STORE THE TOKEN (Where Flutter will find it)
            // Common places: localStorage, sessionStorage, or Cookies.
            localStorage.setItem("auth_token", token);

            // 3. REDIRECT to the Dashboard
            // This matches the scenario: The website just goes to its own home page.
            window.location.href = "dashboard.html"; 
        }
    </script>
</body>
</html>
